name: Publish
on:
  push:
    branches: [master]

jobs:
  publish:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        version:
          - "8.0"
          - "8.0-dev"
          - "8.1"
          - "8.1-dev"
          - "8.1-dev-node-20"
          - "8.2"
          - "8.2-dev"
          - "8.3"
          - "8.3-dev"
          - "8.4"
          - "8.4-dev"
    steps:
      - name: Checkout Code
        uses: actions/checkout@v1
      - name: Docker Hub Login
        run: docker login -u ${{secrets.DOCKER_HUB_USERNAME}} -p ${{secrets.DOCKER_HUB_PASSWORD}}
      - name: Build Image
        run: docker build -t lastcallmedia/php:${{ matrix.version }} ./${{ matrix.version }}
      - name: Push Image
        run: docker push lastcallmedia/php:${{ matrix.version }}
